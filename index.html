<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Storyboard Generator</title>
    <meta name="description"
        content="Generate professional storyboards instantly using Gemini AI based on your project requirements.">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="glass-background"></div>
    <div class="particles" id="particles"></div>

    <main class="app-container">

        <!-- Screen: Home (Create New Project) -->
        <section id="screen-home" class="screen active">
            <div class="hero">
                <h1 class="gradient-text">AI Storyboard Generator</h1>
                <p>Transform your ideas into visual narratives instantly.</p>
                <div class="input-group">
                    <label for="project-name">Project Name</label>
                    <input type="text" id="project-name" placeholder="e.g. My Awesome Short Film" autocomplete="off">
                </div>
                <div class="input-group">
                    <label for="project-description">Brief Description (Optional but recommended)</label>
                    <textarea id="project-description"
                        placeholder="What is this about? e.g. A story about a dog finding its way home..."
                        rows="3"></textarea>
                </div>
                <div class="input-group">
                    <label for="api-key-input">Google Gemini API Key</label>
                    <input type="password" id="api-key-input" placeholder="Paste your API key here..."
                        autocomplete="off">
                </div>
                <button id="btn-create-project" class="btn primary glowing">Start Journey <span
                        class="arrow">‚Üí</span></button>
            </div>
        </section>

        <!-- Screen: Storyboard Type -->
        <section id="screen-type" class="screen hidden">
            <button class="btn-back" onclick="app.goBack()">&#8592; Back</button>
            <div class="header-text">
                <h2>Select Storyboard Type</h2>
                <p class="subtitle">What kind of project are you creating?</p>
            </div>
            <div class="options-grid">
                <div class="option-card" data-value="Drama" onclick="app.selectType('Drama')">
                    <div class="icon">üé≠</div>
                    <h3>Drama</h3>
                    <p>Character-driven narratives</p>
                </div>
                <div class="option-card" data-value="Movie" onclick="app.selectType('Movie')">
                    <div class="icon">üé¨</div>
                    <h3>Movie</h3>
                    <p>Cinematic epic stories</p>
                </div>
                <div class="option-card" data-value="Platform" onclick="app.selectType('Platform')">
                    <div class="icon">üì±</div>
                    <h3>Platform / Commercial</h3>
                    <p>Short-form social content</p>
                </div>
            </div>
        </section>

        <!-- Screen: Duration Input -->
        <section id="screen-duration" class="screen hidden">
            <button class="btn-back" onclick="app.goBack()">&#8592; Back</button>
            <div class="header-text">
                <h2>Project Duration</h2>
                <p class="subtitle" id="duration-subtitle">How long is the intended content?</p>
            </div>
            <div class="duration-container">

                <!-- Standard single-duration input (Movie / Platform) -->
                <div id="duration-standard">
                    <div class="input-group">
                        <input type="number" id="project-duration" placeholder="e.g. 90" autocomplete="off" min="1">
                        <span class="input-unit">minutes</span>
                    </div>
                    <div class="quick-durations" id="quick-durations-standard">
                        <!-- Chips populated by JS -->
                    </div>
                </div>

                <!-- Drama-specific dual input -->
                <div id="duration-drama" style="display:none;">
                    <div class="input-group">
                        <label for="drama-episodes">Number of Episodes</label>
                        <input type="number" id="drama-episodes" placeholder="e.g. 12" autocomplete="off" min="1">
                    </div>
                    <div class="input-group">
                        <label for="drama-minutes">Minutes per Episode <span class="input-hint">(min. 20
                                min)</span></label>
                        <input type="number" id="drama-minutes" placeholder="e.g. 45" autocomplete="off" min="20">
                    </div>
                    <div class="quick-durations" id="quick-durations-drama">
                        <button class="btn-chip" onclick="app.setDramaQuick(20)">20 min</button>
                        <button class="btn-chip" onclick="app.setDramaQuick(30)">30 min</button>
                        <button class="btn-chip" onclick="app.setDramaQuick(45)">45 min</button>
                        <button class="btn-chip" onclick="app.setDramaQuick(60)">60 min</button>
                    </div>
                </div>

                <p class="duration-min-hint" id="duration-min-hint"></p>

                <button id="btn-submit-duration" class="btn primary">Continue <span class="arrow">‚Üí</span></button>
            </div>
        </section>

        <!-- Screen: Genre Selection -->
        <section id="screen-genre" class="screen hidden">
            <button class="btn-back" onclick="app.goBack()">&#8592; Back</button>
            <div class="header-text">
                <h2>Select Genre</h2>
                <p class="subtitle">Choose the mood for your storyboard</p>
            </div>
            <div class="options-grid genre-grid" id="genre-grid">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Screen: Generating (Loading State) -->
        <section id="screen-generating" class="screen hidden">
            <div class="generating-container">
                <div class="ai-orb"></div>
                <h2 class="gradient-text pulse-text">Generating your storyboard...</h2>
                <div class="loading-steps">
                    <p class="step active" id="step-1">Analyzing project parameters...</p>
                    <p class="step" id="step-2">Crafting narrative arc...</p>
                    <p class="step" id="step-3">Visualizing scenes and camera angles...</p>
                    <p class="step" id="step-4">Finalizing storyboard format...</p>
                </div>
            </div>
        </section>

        <!-- Screen: Editor (Redesigned) -->
        <section id="screen-editor" class="screen hidden">
            <!-- Hidden File Input -->
            <input type="file" id="file-upload" accept=".txt,.pdf" style="display: none;">

            <!-- Top Nav / File Upload Buttons (Yellow) -->
            <div class="editor-top-nav">
                <button class="btn nav-btn yellow" data-label="Character Sheets"
                    onclick="app.triggerFileUpload(this)">Character Sheets</button>
                <button class="btn nav-btn yellow" data-label="World Building"
                    onclick="app.triggerFileUpload(this)">World Building</button>
                <button class="btn nav-btn yellow" data-label="Key Items" onclick="app.triggerFileUpload(this)">Key
                    Items</button>
                <button class="btn nav-btn yellow" data-label="Plot Outline" onclick="app.triggerFileUpload(this)">Plot
                    Outline</button>
                <button class="btn nav-btn yellow" data-label="Timeline"
                    onclick="app.triggerFileUpload(this)">Timeline</button>
            </div>

            <!-- Main Tri-Column Layout -->
            <div class="editor-main-layout">

                <!-- Left Column: Chat & Input (Orange) -->
                <div class="layout-col left-col">
                    <div class="panel chat-room orange-panel">
                        <div class="panel-header">AI Chat Room</div>
                        <div class="panel-body" id="chat-messages">
                            <!-- Chat messages output here -->
                        </div>
                    </div>
                    <div class="panel user-input orange-panel">
                        <textarea placeholder="User Input..." id="chat-input"></textarea>
                    </div>
                </div>

                <!-- Middle Column: Fields (Orange) -->
                <div class="layout-col middle-col">
                    <div class="field-group orange-panel">
                        <label>ÊôÇ (Time)</label>
                        <input type="text" id="editor-time" placeholder="Enter time...">
                    </div>
                    <div class="field-group orange-panel">
                        <label>Âú∞ (Location)</label>
                        <input type="text" id="editor-location" placeholder="Enter location...">
                    </div>
                    <div class="field-group orange-panel">
                        <label>‰∫∫ (Character)</label>
                        <input type="text" id="editor-character" placeholder="Enter characters...">
                    </div>
                    <div class="field-group orange-panel">
                        <label>ÈáçË¶ÅÁâ©ÂìÅ (Key Items)</label>
                        <input type="text" id="editor-items" placeholder="Enter key items...">
                    </div>
                    <div class="field-group orange-panel">
                        <label>ÁîüÊàêÈïøÂ∫¶ (Duration)</label>
                        <input type="text" id="editor-length">
                    </div>
                    <div class="field-group orange-panel">
                        <label>ÁâπÊÆäÊ∞îÊ∞õ (Special Vibe)</label>
                        <input type="text" id="editor-vibe" placeholder="Enter vibe...">
                    </div>
                </div>

                <!-- Right Column: AI Output (Green) -->
                <div class="layout-col right-col">
                    <div class="panel ai-output green-panel">
                        <div class="panel-header">AI Output</div>
                        <div class="panel-body" id="storyboard-output" contenteditable="true">
                            <!-- Generated draft storyboard displayed and editable here -->
                        </div>
                    </div>
                    <div class="editor-bottom-action">
                        <button class="btn green" id="btn-save" onclick="app.downloadPDF()">Save</button>
                        <button class="btn secondary" onclick="app.resetFlow()">Start New</button>
                    </div>
                </div>

            </div>
        </section>

    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="js/gemini.js"></script>
    <script src="js/app.js"></script>
</body>

</html>